<!doctype html>
<meta charset="utf-8">
<title>YM WORKS – アンケートありがとうございました</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;max-width:600px;margin:2rem auto;padding:0 24px;line-height:1.6;color:#2c3e50;background:#fff}
textarea{width:100%;height:120px;margin-top:16px;border:2px solid #e8eef7;border-radius:8px;padding:16px;font-family:inherit;font-size:16px;color:#2c3e50;background:#fafbfc;resize:vertical;outline:none;transition:all 0.2s ease;box-sizing:border-box}
textarea:focus{border-color:#3498db;box-shadow:0 0 0 3px rgba(52,152,219,0.1);background:#fff}
button{margin-top:24px;padding:12px 28px;font-size:15px;font-weight:600;cursor:pointer;border:none;border-radius:6px;display:inline-flex;align-items:center;gap:8px;transition:all 0.2s ease;margin-right:12px;height:44px;text-transform:none;letter-spacing:0.3px}
button.primary{background:linear-gradient(135deg, #3498db 0%, #2980b9 100%);color:white;box-shadow:0 2px 8px rgba(52,152,219,0.3)}
button.primary:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(52,152,219,0.4)}
button.primary:active{transform:translateY(0);box-shadow:0 2px 6px rgba(52,152,219,0.3)}
button.secondary{background:#fff;color:#3498db;border:2px solid #3498db}
button.secondary:hover{background:#3498db;color:white;transform:translateY(-1px)}
button.copied{background:linear-gradient(135deg, #27ae60 0%, #229954 100%);color:white;box-shadow:0 2px 8px rgba(39,174,96,0.3)}
button.copied:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(39,174,96,0.4)}
h1{font-size:28px;font-weight:700;margin-bottom:12px;color:#2c3e50;letter-spacing:-0.2px}
small{color:#7f8c8d;font-size:16px;font-weight:400}
small{color:#5f6368;font-size:14px;font-weight:400}
button:disabled{background:#ecf0f1;color:#95a5a6;cursor:not-allowed;border:2px solid #ecf0f1}
button:disabled:hover{background:#ecf0f1;box-shadow:none;transform:none}
.high{color:#27ae60;font-size:16px;margin:20px 0;line-height:1.5;font-weight:500}
.low{color:#5f6368;font-size:16px;margin:20px 0;line-height:1.5;font-weight:500}
.hidden{display:none}
</style>
<h1>ワイエムワークス</h1>
<small>アンケートへのご協力、誠にありがとうございました。</small>
<!-- ★4-5 用 -->
<p id="highMsg" class="high hidden">
  本日は愛車をお預けいただき、ありがとうございました！<br>
  いいお店は、いい人が広めてくれる。<br>
  車の楽しさを知っている方々のお役に立てるよう、当店を知ってもらえたら嬉しいです。<br>
  よろしければ、下のレビューをコピーして投稿していただけませんか。
</p>
<!-- ★1-3 用 -->
<p id="lowMsg" class="low hidden">
  この度はご期待に添えず、申し訳ございませんでした。<br>
  改善のため <a href="mailto:admin@ymworks.com" style="color:#3498db;text-decoration:none;font-weight:600">admin@ymworks.com</a> までご意見をお寄せください。
</p>
<p style="margin-top:24px;color:#86868b;font-size:15px;font-weight:400;">
  投稿内容は自由に編集していただけます
</p>
<textarea id="txt"></textarea><br>
<button id="copy" class="primary">📋 レビューをコピー</button>
<button id="gbtn" class="secondary" disabled>Googleクチコミを書く</button>
<script>
/* -------- パラメータ取得 -------- */
const qs      = new URLSearchParams(location.search);
const comment = decodeURIComponent(qs.get('comment') || '');
const rating  = Number(qs.get('rating')   || 0);   // 1〜5 を想定
/* -------- DOM -------- */
const txt  = document.getElementById('txt');
const copy = document.getElementById('copy');
const btn  = document.getElementById('gbtn');
const hi   = document.getElementById('highMsg');
const lo   = document.getElementById('lowMsg');
let isCopied = false;
/* -------- 初期表示 -------- */
txt.value = comment;
btn.onclick = () => {
  window.open('https://search.google.com/local/writereview?placeid=' + PLACE_ID, '_blank');
};
/* -------- コピー処理 -------- */
copy.onclick = () => {
  if (txt.value.trim()) {
    navigator.clipboard.writeText(txt.value)
      .then(() => {
        // コピー完了のフィードバック
        copy.textContent = '✅ コピー完了';
        copy.className = 'copied';
        isCopied = true;
        
        // Googleレビューボタンを有効化
        btn.disabled = false;
        btn.textContent = 'Googleクチコミを書く';
        btn.className = 'primary';
        
        // 3秒後に元に戻す
        setTimeout(() => {
          copy.textContent = '📋 レビューをコピー';
          copy.className = 'primary';
        }, 3000);
      })
      .catch(() => alert('コピーに失敗しました'));
  } else {
    alert('コピーするテキストがありません');
  }
};
/* -------- フォローメッセージ分岐 -------- */
if (rating >= 4) {
  hi.classList.remove('hidden');   // 高評価メッセージ表示
} else {
  lo.classList.remove('hidden');   // 低評価メッセージ表示
}
</script>
