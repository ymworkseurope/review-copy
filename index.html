<!doctype html>
<meta charset="utf-8">
<title>ワイエムワークス – アンケートありがとうございました</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',Roboto,sans-serif;max-width:560px;margin:4rem auto;padding:0 32px;line-height:1.6;color:#1d1d1f;background:#fff}
textarea{width:100%;height:100px;margin-top:24px;border:1px solid #d2d2d7;border-radius:12px;padding:16px;font-family:-apple-system,BlinkMacSystemFont,sans-serif;font-size:16px;color:#1d1d1f;background:#fbfbfd;resize:vertical;outline:none;transition:border-color 0.2s ease;box-sizing:border-box}
textarea:focus{border-color:#0071e3;box-shadow:0 0 0 4px rgba(0,113,227,0.1)}
button{margin-top:24px;padding:12px 32px;font-size:17px;font-weight:400;cursor:pointer;border:none;border-radius:12px;display:inline-flex;align-items:center;gap:8px;transition:all 0.2s ease;margin-right:12px;min-height:44px}
button.primary{background:#0071e3;color:white}
button.primary:hover{background:#0056b3;transform:translateY(-1px)}
button.primary:active{transform:translateY(0)}
button.secondary{background:#f5f5f7;color:#1d1d1f;border:1px solid #d2d2d7}
button.secondary:hover{background:#e8e8ed}
button.copied{background:#30d158;color:white}
button.copied:hover{background:#28cd4f}
button:disabled{background:#f5f5f7;color:#86868b;cursor:not-allowed;border:1px solid #d2d2d7}
button:disabled:hover{background:#f5f5f7;transform:none}
h1{font-size:32px;font-weight:600;margin-bottom:8px;color:#1d1d1f;letter-spacing:-0.5px}
small{color:#86868b;font-size:17px;font-weight:400}
.high{color:#1d1d1f;font-size:17px;margin:32px 0;line-height:1.5;font-weight:400}
.low{color:#86868b;font-size:17px;margin:32px 0;line-height:1.5;font-weight:400}
.hidden{display:none}
</style>
<h1>ワイエムワークス</h1>
<small>アンケートへのご協力、誠にありがとうございました。</small>
<!-- ★4-5 用 -->
<p id="highMsg" class="high hidden">
  本日は愛車をお預けいただき、ありがとうございました！<br>
  いいお店は、いい人が広めてくれる。<br>
  車の楽しさを知っている方々のお役に立てるよう、当店を知ってもらえたら嬉しいです。<br>
  よろしければ、下のレビューをコピーして投稿していただけませんか。
</p>
<!-- ★1-3 用 -->
<p id="lowMsg" class="low hidden">
  この度はご期待に添えず、申し訳ございませんでした。<br>
  改善のため <a href="mailto:admin@ymworks.com" style="color:#0071e3;text-decoration:none;font-weight:400">admin@ymworks.com</a> までご意見をお寄せください。
</p>
<p style="margin-top:24px;color:#86868b;font-size:15px;font-weight:400;">
  投稿内容は自由に編集していただけます
</p>
<textarea id="txt"></textarea><br>
<button id="copy" class="primary">📋 レビューをコピー</button>
<button id="gbtn" class="secondary" disabled>Googleクチコミを書く</button>
<script>
const PLACE_ID = 'ChIJi36eeSgoAWARJd6g5QUce6k';   // 自社 Place ID に差し替え
/* -------- パラメータ取得 -------- */
const qs      = new URLSearchParams(location.search);
const comment = decodeURIComponent(qs.get('comment') || '');
const rating  = Number(qs.get('rating')   || 0);   // 1〜5 を想定
/* -------- DOM -------- */
const txt  = document.getElementById('txt');
const copy = document.getElementById('copy');
const btn  = document.getElementById('gbtn');
const hi   = document.getElementById('highMsg');
const lo   = document.getElementById('lowMsg');
let isCopied = false;
/* -------- 初期表示 -------- */
txt.value = comment;
btn.onclick = () => {
  window.open('https://search.google.com/local/writereview?placeid=' + PLACE_ID, '_blank');
};
/* -------- コピー処理 -------- */
copy.onclick = () => {
  if (txt.value.trim()) {
    navigator.clipboard.writeText(txt.value)
      .then(() => {
        // コピー完了のフィードバック
        copy.textContent = '✅ コピー完了';
        copy.className = 'copied';
        isCopied = true;
        
        // Googleレビューボタンを有効化
        btn.disabled = false;
        btn.textContent = 'Googleクチコミを書く';
        btn.className = 'primary';
        
        // 3秒後に元に戻す
        setTimeout(() => {
          copy.textContent = '📋 レビューをコピー';
          copy.className = 'primary';
        }, 3000);
      })
      .catch(() => alert('コピーに失敗しました'));
  } else {
    alert('コピーするテキストがありません');
  }
};
/* -------- フォローメッセージ分岐 -------- */
if (rating >= 4) {
  hi.classList.remove('hidden');   // 高評価メッセージ表示
} else {
  lo.classList.remove('hidden');   // 低評価メッセージ表示
}
</script>
