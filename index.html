<!doctype html>
<meta charset="utf-8">
<title>ãƒ¯ã‚¤ã‚¨ãƒ ãƒ¯ãƒ¼ã‚¯ã‚¹ â€“ ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ</title>
<style>
/* ã‚«ãƒ©ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã®æ”¹å–„ - Apple HIGæº–æ‹  */
:root {
  /* Primary Colors */
  --color-primary: #0071e3;
  --color-primary-hover: #0077ED;
  
  /* Success */
  --color-success: #34c759;
  --color-success-hover: #30d158;
  
  /* Text Colors - å…ƒã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å°Šé‡ */
  --color-text-primary: #1d1d1f;
  --color-text-secondary: #86868b;
  
  /* Background */
  --color-bg-primary: #fff;
  --color-bg-secondary: #f5f5f7;
  --color-bg-input: #fbfbfd;
  
  /* Border */
  --color-border: #d2d2d7;
  --color-border-hover: #86868b;
}

/* Dark Mode Support */
@media (prefers-color-scheme: dark) {
  :root {
    --color-text-primary: #f5f5f7;
    --color-text-secondary: #a1a1a6;
    --color-bg-primary: #000;
    --color-bg-secondary: #1d1d1f;
    --color-bg-input: #2c2c2e;
    --color-border: #424245;
    --color-border-hover: #7a7a7c;
  }
}

body{
  font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',Roboto,sans-serif;
  max-width:560px;
  margin:4rem auto;
  padding:0 32px;
  line-height:1.6;
  color:var(--color-text-primary);
  background:var(--color-bg-primary);
  -webkit-font-smoothing: antialiased;
}

textarea{
  width:100%;
  height:100px;
  margin-top:24px;
  border:1px solid var(--color-border);
  border-radius:12px;
  padding:16px;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  font-size:16px;
  color:var(--color-text-primary);
  background:var(--color-bg-input);
  resize:vertical;
  outline:none;
  transition:border-color 0.2s ease, background-color 0.2s ease;
  box-sizing:border-box
}

textarea:hover{
  border-color:var(--color-border-hover);
}

textarea:focus{
  border-color:var(--color-primary);
  background:var(--color-bg-primary);
  box-shadow:0 0 0 4px rgba(0,113,227,0.1)
}

button{
  margin-top:24px;
  padding:12px 32px;
  font-size:17px;
  font-weight:400;
  cursor:pointer;
  border:none;
  border-radius:12px;
  display:inline-flex;
  align-items:center;
  gap:8px;
  transition:all 0.2s ease;
  margin-right:12px;
  min-height:44px
}

button.primary{
  background:var(--color-primary);
  color:white
}

button.primary:hover{
  background:var(--color-primary-hover);
  transform:translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,113,227,0.15);
}

button.primary:active{
  transform:translateY(0)
}

button.secondary{
  background:var(--color-bg-secondary);
  color:var(--color-text-primary);
  border:1px solid var(--color-border)
}

button.secondary:hover{
  background:#e8e8ed;
  border-color:var(--color-border-hover);
}

button.copied{
  background:var(--color-success);
  color:white
}

button.copied:hover{
  background:var(--color-success-hover)
}

button:disabled{
  background:var(--color-bg-secondary);
  color:var(--color-text-secondary);
  cursor:not-allowed;
  border:1px solid var(--color-border);
  opacity: 0.6;
}

button:disabled:hover{
  background:var(--color-bg-secondary);
  transform:none;
  box-shadow: none;
}

h1{
  font-size:32px;
  font-weight:600;
  margin-bottom:8px;
  color:var(--color-text-primary);
  letter-spacing:-0.5px
}

small{
  color:var(--color-text-secondary);
  font-size:17px;
  font-weight:400
}

.high{
  color:var(--color-text-primary);
  font-size:17px;
  margin:32px 0;
  line-height:1.5;
  font-weight:400
}

.low{
  color:var(--color-text-secondary);
  font-size:17px;
  margin:32px 0;
  line-height:1.5;
  font-weight:400
}

.low a {
  color:var(--color-primary);
  text-decoration:none;
  font-weight:400;
  transition: opacity 0.2s ease;
}

.low a:hover {
  opacity: 0.8;
  text-decoration: underline;
}

.hidden{
  display:none
}

/* Helper text styling */
.helper-text{
  margin-top:24px;
  color:var(--color-text-secondary);
  font-size:15px;
  font-weight:400;
}

/* Focus visible for accessibility */
button:focus-visible,
textarea:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Mobile responsiveness */
@media (max-width: 600px) {
  body {
    margin: 2rem auto;
    padding: 0 20px;
  }
  
  button {
    display: block;
    width: 100%;
    margin-right: 0;
    margin-bottom: 12px;
  }
  
  button:last-of-type {
    margin-bottom: 0;
  }
}
</style>
<h1>ãƒ¯ã‚¤ã‚¨ãƒ ãƒ¯ãƒ¼ã‚¯ã‚¹</h1>
<small>ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã¸ã®ã”å”åŠ›ã€èª ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</small>
<!-- â˜…4-5 ç”¨ -->
<p id="highMsg" class="high hidden">
  æœ¬æ—¥ã¯æ„›è»Šã‚’ãŠé ã‘ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼<br>
  ã„ã„ãŠåº—ã¯ã€ã„ã„äººãŒåºƒã‚ã¦ãã‚Œã‚‹ã€‚<br>
  è»Šã®æ¥½ã—ã•ã‚’çŸ¥ã£ã¦ã„ã‚‹æ–¹ã€…ã®ãŠå½¹ã«ç«‹ã¦ã‚‹ã‚ˆã†ã€å½“åº—ã‚’çŸ¥ã£ã¦ã‚‚ã‚‰ãˆãŸã‚‰å¬‰ã—ã„ã§ã™ã€‚<br>
  ã‚ˆã‚ã—ã‘ã‚Œã°ã€ä¸‹ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æŠ•ç¨¿ã—ã¦ã„ãŸã ã‘ã¾ã›ã‚“ã‹ã€‚
</p>
<!-- â˜…1-3 ç”¨ -->
<p id="lowMsg" class="low hidden">
  ã“ã®åº¦ã¯ã”æœŸå¾…ã«æ·»ãˆãšã€ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã§ã—ãŸã€‚<br>
  æ”¹å–„ã®ãŸã‚ <a href="mailto:admin@ymworks.com">admin@ymworks.com</a> ã¾ã§ã”æ„è¦‹ã‚’ãŠå¯„ã›ãã ã•ã„ã€‚
</p>
<p class="helper-text">
  æŠ•ç¨¿å†…å®¹ã¯è‡ªç”±ã«ç·¨é›†ã—ã¦ã„ãŸã ã‘ã¾ã™
</p>
<textarea id="txt"></textarea><br>
<button id="copy" class="primary">ğŸ“‹ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼</button>
<button id="gbtn" class="secondary" disabled>Googleã‚¯ãƒã‚³ãƒŸã‚’æ›¸ã</button>
<script>
const PLACE_ID = 'ChIJi36eeSgoAWARJd6g5QUce6k';   // è‡ªç¤¾ Place ID ã«å·®ã—æ›¿ãˆ
/* -------- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å–å¾— -------- */
const qs      = new URLSearchParams(location.search);
const comment = decodeURIComponent(qs.get('comment') || '');
const rating  = Number(qs.get('rating')   || 0);   // 1ã€œ5 ã‚’æƒ³å®š
/* -------- DOM -------- */
const txt  = document.getElementById('txt');
const copy = document.getElementById('copy');
const btn  = document.getElementById('gbtn');
const hi   = document.getElementById('highMsg');
const lo   = document.getElementById('lowMsg');
let isCopied = false;
/* -------- åˆæœŸè¡¨ç¤º -------- */
txt.value = comment;
btn.onclick = () => {
  window.open('https://search.google.com/local/writereview?placeid=' + PLACE_ID, '_blank');
};
/* -------- ã‚³ãƒ”ãƒ¼å‡¦ç† -------- */
copy.onclick = () => {
  if (txt.value.trim()) {
    navigator.clipboard.writeText(txt.value)
      .then(() => {
        // ã‚³ãƒ”ãƒ¼å®Œäº†ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
        copy.textContent = 'âœ… ã‚³ãƒ”ãƒ¼å®Œäº†';
        copy.className = 'copied';
        isCopied = true;
        
        // Googleãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
        btn.disabled = false;
        btn.textContent = 'Googleã‚¯ãƒã‚³ãƒŸã‚’æ›¸ã';
        btn.className = 'primary';
        
        // 3ç§’å¾Œã«å…ƒã«æˆ»ã™
        setTimeout(() => {
          copy.textContent = 'ğŸ“‹ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼';
          copy.className = 'primary';
        }, 3000);
      })
      .catch(() => {
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã‚’è¿½åŠ 
        txt.select();
        try {
          document.execCommand('copy');
          copy.textContent = 'âœ… ã‚³ãƒ”ãƒ¼å®Œäº†';
          copy.className = 'copied';
          
          btn.disabled = false;
          btn.textContent = 'Googleã‚¯ãƒã‚³ãƒŸã‚’æ›¸ã';
          btn.className = 'primary';
          
          setTimeout(() => {
            copy.textContent = 'ğŸ“‹ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼';
            copy.className = 'primary';
          }, 3000);
        } catch(err) {
          alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ');
        }
      });
  } else {
    alert('ã‚³ãƒ”ãƒ¼ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆãŒã‚ã‚Šã¾ã›ã‚“');
  }
};
/* -------- ãƒ•ã‚©ãƒ­ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åˆ†å² -------- */
if (rating >= 4) {
  hi.classList.remove('hidden');   // é«˜è©•ä¾¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
} else {
  lo.classList.remove('hidden');   // ä½è©•ä¾¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
}
</script>
